#summary How to read data written to an OutputStream from an InputStream.
#labels Featured

= Introduction =

Sometimes a library writes its results to an `OutputStream` and you need to read them back from an `InputStream`.

= Details =
This code was inspired by the following article: http://ostermiller.org/convert_java_outputstream_inputstream.html

Two main classes in this section are `InputStreamFromOutputStream` and `OutputStreamToInputStream`

=== !InputStreamFromOutputStream ===
This abstract class must be extended and the metod produce() implemented.
The data who is produced inside the function produce() is written to an `OutputStream` and can be readed back from from this class.
This is the preferred way to convert data written from an `OutputStream[ into an `InputStream`, because the behaviour of the outer code tends to be more clear.

Sample usage:

{{{

final String dataId=//id of some data.
final InputStreamFromOutputStream isos = new InputStreamFromOutputStream() {
   @Override
   public void produce(final OutputStream dataSink) throws Exception {
      //call your application function who produces the data here
      produceMydata(dataId,dataSink)
   }
 };
 try {
  //now you can read from the InputStream the data that was written to the 
  //OutputStream
  byte[] readed=IOUtils.toByteArray(isos);
  //Use data here
 } catch (final IOException e) {
  //Handle exception here
 } finally {
  isos.close();
 }

}
}}}